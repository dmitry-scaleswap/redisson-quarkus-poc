# redisson quarkus remote service poc

### compile to native
> package -Pnative -Dquarkus.native.container-build=true

### calling remote service (fails atm..)

1. run the native image
2. register the remote interface from within another quarkus app like this:
    `redisson.getRemoteService().get(DummySpec.class, 15, TimeUnit.SECONDS);`
3. a call to the remote service causes the following stacktrace in the redisson-poc native:
   `2021-07-12 22:19:34,209 WARN  [io.net.uti.con.DefaultPromise] (redisson-netty-2-10) An exception was thrown by org.redisson.misc.RedissonPromise$$Lambda$bcb9dbaa0e1c7c52809ba6ec648dbf0e2cf90833.operationComplete(): java.util.NoSuchElementException: No value present
   at java.util.Optional.get(Optional.java:148)
   at org.redisson.RedissonRemoteService.executeMethod(RedissonRemoteService.java:400)
   at org.redisson.RedissonRemoteService.lambda$subscribe$3(RedissonRemoteService.java:384)
   at org.redisson.misc.RedissonPromise.lambda$onComplete$0(RedissonPromise.java:187)
   at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:578)
   at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:571)
   at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:550)
   at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:491)
   at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:616)
   at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:605)
   at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:104)
   at org.redisson.misc.RedissonPromise.trySuccess(RedissonPromise.java:82)
   at org.redisson.command.RedisExecutor.handleReference(RedisExecutor.java:484)
   at org.redisson.command.RedisExecutor.handleSuccess(RedisExecutor.java:476)
   at org.redisson.command.RedisExecutor.handleResult(RedisExecutor.java:461)
   at org.redisson.command.RedisExecutor.checkAttemptPromise(RedisExecutor.java:447)
   at org.redisson.command.RedisExecutor.lambda$execute$3(RedisExecutor.java:169)
   at org.redisson.misc.RedissonPromise.lambda$onComplete$0(RedissonPromise.java:187)
   at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:578)
   at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:552)
   at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:491)
   at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:616)
   at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:605)
   at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:104)
   at org.redisson.misc.RedissonPromise.trySuccess(RedissonPromise.java:82)
   at org.redisson.client.handler.CommandDecoder.completeResponse(CommandDecoder.java:435)
   at org.redisson.client.handler.CommandDecoder.handleResult(CommandDecoder.java:429)
   at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:352)
   at org.redisson.client.handler.CommandDecoder.decodeCommand(CommandDecoder.java:177)
   at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:116)
   at org.redisson.client.handler.CommandDecoder.decode(CommandDecoder.java:101)
   at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:507)
   at io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:366)
   at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
   at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
   at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
   at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
   at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
   at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
   at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
   at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
   at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
   at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
   at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
   at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
   at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
   at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
   at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)
   at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)
   at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)
   at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)
   at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
   at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
   at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
   at java.lang.Thread.run(Thread.java:829)
   at com.oracle.svm.core.thread.JavaThreads.threadStartRoutine(JavaThreads.java:553)
   at com.oracle.svm.core.posix.thread.PosixJavaThreads.pthreadStartRoutine(PosixJavaThreads.java:192)`
